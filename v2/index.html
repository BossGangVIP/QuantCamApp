<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>QuantCam</title>
<style>
:root{color-scheme:dark}
body{margin:0;background:#0b1220;color:#e7eefc;font-family:system-ui,Arial;height:100vh;display:flex;flex-direction:column;align-items:center}
h1{margin:18px 0 8px}
.row{display:flex;gap:10px;margin:8px 0 12px}
button{background:#2aa6ff;color:#001633;border:0;border-radius:10px;padding:12px 16px;font-weight:700}
#status{min-height:22px;color:#8fd18f}
video{width:100%;max-width:520px;margin-top:12px;border:2px solid #335;border-radius:12px}
small{opacity:.7}
</style>
</head><body>
<h1>QuantCam</h1>
<div class="row">
  <button id="openCamera">Open Camera</button>
  <button id="pingBtn">Run Ping Test</button>
</div>
<div id="status"><small>Ready.</small></div>
<video id="cameraFeed" autoplay playsinline muted></video>
<script>
// Hard-wired backend /exec URL
const BACKEND_URL="https://script.google.com/macros/s/AKfycbzc0L0-9UmcHQvTxoQ0vIQT4pvDxpwOK1CUJiKivi0tumJpnz0FAf7OlDVHb8bm6xKL/exec";
const $=id=>document.getElementById(id);
const setStatus=(t,ok=true)=>{const s=$("status");s.textContent=t;s.style.color=ok?"#8fd18f":"#ff8a8a";};

$("openCamera").addEventListener("click",async()=>{
  try{
    if(!navigator.mediaDevices?.getUserMedia){setStatus("Camera API not available.",false);return;}
    const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
    $("cameraFeed").srcObject=stream; setStatus("Camera streaming.");
  }catch(e){ setStatus("Camera access failed: "+e.message,false); }
});

$("pingBtn").addEventListener("click",async()=>{
  try{
    const r=await fetch(BACKEND_URL+"?ping=1",{mode:"cors"});
    setStatus(r.ok?("OK • "+r.status):("Ping failed • "+r.status),r.ok);
  }catch(e){ setStatus("Ping failed: "+e,false); }
});
</script>
</body></html>
