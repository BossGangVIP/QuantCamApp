<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>QuantCam</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f1a28">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <h1 class="brand">QuantCam</h1>
    <div id="ingestBadge" class="badge" aria-live="polite">Ingested ✓</div>
    <a class="gear" href="settings.html" aria-label="Settings">⚙️</a>
  </header>

  <main class="stage">
    <div class="video-wrap">
      <video id="video" playsinline autoplay muted></video>
      <canvas id="frame" class="hide"></canvas>
      <div id="preview" class="preview hide">
        <img id="previewImg" alt="Last photo preview" />
        <button id="closePreview" class="x" aria-label="Close preview">✕</button>
      </div>
    </div>
    <p id="status" class="status">Camera ready</p>
  </main>

  <nav class="toolbar">
    <button id="flipBtn" class="btn icon" aria-label="Flip camera" title="Flip">
      <svg viewBox="0 0 24 24" width="28" height="28" aria-hidden="true">
        <path fill="currentColor"
          d="M7 7h4v2H8.41l1.3 1.29-1.42 1.42L4.59 8l3.7-3.71 1.42 1.42L8.41 7H11v2H7V7zm10 10h-4v-2h2.59l-1.3-1.29 1.42-1.42L19.41 16l-3.7 3.71-1.42-1.42L15.59 17H13v-2h4v2z"/>
      </svg>
    </button>

    <button id="shutterBtn" class="btn primary" aria-label="Capture" title="Capture">
      <svg viewBox="0 0 24 24" width="34" height="34" aria-hidden="true">
        <path fill="currentColor"
          d="M9 3l1.5 2H15c1.1 0 2 .9 2 2h1c1.66 0 3 1.34 3 3v7c0 1.66-1.34 3-3 3H6c-1.66 0-3-1.34-3-3V10c0-1.66 1.34-3 3-3h1c0-1.1.9-2 2-2h0L9 3zm3 6a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z"/>
      </svg>
    </button>

    <button id="galleryBtn" class="btn icon" aria-label="Open gallery" title="Gallery">📁</button>
  </nav>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
